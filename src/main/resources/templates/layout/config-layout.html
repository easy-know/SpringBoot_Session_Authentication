<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="configFragment">
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <title>Front</title>

    <!--  favicon  -->
    <link rel="icon" href="/favicon/jh.ico?v=3"/>

    <!--  jquery  -->
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/jquery.validate.min.js"></script>

    <!--  bootstrap  -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <script src="/js/bootstrap.bundle.min.js"></script>

    <!--  style.css  -->
    <link rel="stylesheet" href="/css/style.css"/>

    <script>
        // form -> object
        jQuery.fn.serializeObject = function() {
            var obj = null;
            try {
                if(this[0].tagName && this[0].tagName.toUpperCase() == "FORM" ) {
                    var arr = this.serializeArray();
                    if(arr){ obj = {};
                        jQuery.each(arr, function() {
                            obj[this.name] = this.value; });
                    }
                }
            }catch(e) {
                alert(e.message);
            }finally {}
            return obj;
        }

        // jquery validate setting
        $.validator.setDefaults({
            onkeyup: false,
            onclick: false,
            onfocusout: false,
            showErrors: function(errorMap,errorList){
                if(this.numberOfInvalids()){ // 에러가 있으면
                    alert(errorList[0].message); // 경고창으로 띄움
                }
            }
        });


        // ajax 공통 setting
        $.ajaxSetup({
            contentType: "application/json",
            success: (data, textStatus, jqXHR) => {
                alert('success');
                alert(data);
                alert(textStatus);
                alert(jqXHR);
            },
            error: (jqXHR, textStatus, errorThrown) => {
                console.log('실패');
                console.log(jqXHR);
                console.log(textStatus);
                console.log(errorThrown);
            }
        })
    </script>
</head>
</html>
